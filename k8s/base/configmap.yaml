apiVersion: v1
kind: ConfigMap
metadata:
  name: micro-config
  namespace: ${NAMESPACE}
data:
  SPRING_PROFILES_ACTIVE: "dev"
  JAVA_OPTS: "-Xms256m -Xmx512m"
  
  # Database Configuration (H2 in-memory for dev profile - no external DB needed)
  # When SPRING_PROFILES_ACTIVE=dev, services use H2 in-memory database
  # This allows services to start without external MySQL databases
  SPRING_DATASOURCE_URL: "jdbc:h2:mem:ecommerce_dev_db;DB_CLOSE_ON_EXIT=FALSE"
  SPRING_DATASOURCE_USERNAME: "sa"
  SPRING_DATASOURCE_PASSWORD: ""
  SPRING_JPA_HIBERNATE_DDL_AUTO: "update"
  SPRING_JPA_SHOW_SQL: "false"

  # Service Discovery
  EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE: "http://service-discovery.${NAMESPACE}.svc.cluster.local:8761/eureka/"
  EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: "http://service-discovery.${NAMESPACE}.svc.cluster.local:8761/eureka/"
  
  EUREKA_INSTANCE_PREFER_IP_ADDRESS: "true"
  EUREKA_INSTANCE_HOSTNAME: "${spring.application.name}.${NAMESPACE}.svc.cluster.local"

  # Cloud Config
  SPRING_CLOUD_CONFIG_URI: "http://cloud-config.${NAMESPACE}.svc.cluster.local:9296"
  SPRING_ZIPKIN_BASE_URL: http://zipkin:9411/

  # URLs de servicios para la comunicaci√≥n interna
  USER_SERVICE_HOST: "http://user-service.${NAMESPACE}.svc.cluster.local:8700"
  PRODUCT_SERVICE_HOST: "http://product-service.${NAMESPACE}.svc.cluster.local:8500"
  ORDER_SERVICE_HOST: "http://order-service.${NAMESPACE}.svc.cluster.local:8300"
  FAVOURITE_SERVICE_HOST: "http://favourite-service.${NAMESPACE}.svc.cluster.local:8800"
  SHIPPING_SERVICE_HOST: "http://shipping-service.${NAMESPACE}.svc.cluster.local:8600"
  PAYMENT_SERVICE_HOST: "http://payment-service.${NAMESPACE}.svc.cluster.local:8400"
  PROXY_CLIENT_HOST: "http://proxy-client.${NAMESPACE}.svc.cluster.local:8900"
  SPRING_CONFIG_IMPORT: "optional:configserver:http://cloud-config.${NAMESPACE}.svc.cluster.local:9296/"
