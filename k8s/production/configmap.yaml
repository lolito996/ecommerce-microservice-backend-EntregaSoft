apiVersion: v1
kind: ConfigMap
metadata:
  name: micro-config
  namespace: microservices-production
data:
  # Spring Profiles
  SPRING_PROFILES_ACTIVE: "production"
  
  # Eureka Configuration
  EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE: "http://service-discovery.microservices-production.svc.cluster.local:8761/eureka/"
  EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: "http://service-discovery.microservices-production.svc.cluster.local:8761/eureka"
  EUREKA_CLIENT_REGION: "default"
  EUREKA_CLIENT_AVAILABILITYZONES_DEFAULT: "defaultZone"
  
  # Cloud Config - IMPORTANTE
  SPRING_CLOUD_CONFIG_URI: "http://cloud-config.microservices-production.svc.cluster.local:9296"
  SPRING_CONFIG_IMPORT: "optional:configserver:http://cloud-config.microservices-production.svc.cluster.local:9296/"
  
  # Zipkin Configuration
  SPRING_ZIPKIN_BASE_URL: "http://zipkin.microservices-production.svc.cluster.local:9411"
  SPRING_SLEUTH_SAMPLER_PROBABILITY: "1.0"
  
  # Prometheus Configuration
  MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED: "true"
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,prometheus,metrics"
  
  # Database Configuration (PostgreSQL para servicios que lo requieran)
  SPRING_DATASOURCE_URL: "jdbc:postgresql://postgres.microservices-production.svc.cluster.local:5432/ecommerce"
  SPRING_DATASOURCE_USERNAME: "postgres"
  SPRING_DATASOURCE_PASSWORD: "postgres123"
  
  # JVM Options for Production
  JAVA_OPTS: "-Xms512m -Xmx1024m -XX:+UseG1GC -XX:MaxGCPauseMillis=200"
